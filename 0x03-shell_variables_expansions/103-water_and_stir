#!/bin/bash

# Define custom base character sets
base_water="water"
base_stir="stir"
base_bestchol="bestchol"

# Function to convert from custom base to decimal
to_decimal() {
    local input="$1"
    local charset="$2"
    local base=${#charset}
    local len=${#input}
    local value=0

    for ((i=0; i<len; i++)); do
        char="${input:$i:1}"
        digit=$(expr index "$charset" "$char" - 1)
        value=$((value * base + digit))
    done

    echo "$value"
}

# Function to convert decimal to custom base
from_decimal() {
    local num="$1"
    local charset="$2"
    local base=${#charset}
    local result=""

    while [ "$num" -gt 0 ]; do
        remainder=$((num % base))
        result="${charset:remainder:1}$result"
        num=$((num / base))
    done

    echo "${result:-${charset:0:1}}"
}

# Convert both inputs to decimal
dec_water=$(to_decimal "$WATER" "$base_water")
dec_stir=$(to_decimal "$STIR" "$base_stir")

# Add them
sum=$((dec_water + dec_stir))

# Convert the sum to base_bestchol
from_decimal "$sum" "$base_bestchol"
